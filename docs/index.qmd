---
title: "Abschlussprojekt"
author: "Robwer4"
format: html
editor: visual
---

```{r}
library(tidyverse)
```

```{r}
familiengaerten_lang <- read_csv2(here::here("daten/raw/fg_20250331_v2.csv"))
```

# Einleitung

## Daten

Die Daten beinhalten Schwermetallgehalte \[ppm\] sowie die Begleitparameter pH und organischer Kohlenstoff \[%\] von Bodenproben eines Familengartenareals. Auf dem Areal wurden während 6 Zeitpunkten (1999, 2004, 2009, 2014, 2019 und 2024), auf 16 Standorten, Bodenproben aus den Tiefen 0-20 cm und 40-60 cm entnommen und auf die oben genannten Parameter analysiert.

Als Grundlage zur Beurteilung von Schwermetallgehalten im Boden dienen die Richt-, Prüf- und Sanierungswerte der "Verordnung über Belastungen im Boden" (VBBo).

## Analyseziele

1.  Darstellung der Verteilungen der Schwermetallgehalte (Boxplot).
2.  Darstellung der zeitlichen Verläufe, sowie der zeitlichen Trends (lineare Regression) der verschiedenen Schwermetallgehlate pro Standort.
3.  Beurteilung der der aktuellsten Messungen (2024) anhand der Richt-, Prüf- und Sanierungswerte gemäss VBBo.

# Daten Aufbereitung

Nicht-relevante Spalten löschen für vereinfachte Transformation in breite Tabelle.

```{r}
familiengaerten_lang_delet <- familiengaerten_lang |> 
  select(-c(y,
            m.LaborID,
            m.a.jahr,
            HorizontNr,
            m.ProbenIDs, 
            mad.y,
            mad.y.orig,
            N.used))
```

Lange Tabelle in breite Tabelle transformieren.

Spaltenbeschriftungen unbenennen.

Spalten Anordnung ändern.

```{r}
familiengaerten_breit <- pivot_wider(
  data = familiengaerten_lang_delet,
  names_from = "para",
  values_from = "y.orig") |> 
  rename(Periode = periode,
         Probenahmedatum = p.dat) |> 
  relocate(c(PHCA, ORG_SUB),
           .after = last_col())
```

Zeilen mit StandortID 9401-9416 löschen, da diese Standorte lediglich in der letzten Messperiode beprobt wurden

Spalte mit Jahr hizufügen

```{r}
Familiengaerten_zeitreihe_breit <- familiengaerten_breit |> 
  filter(!(StandortID >= 9401))
```

# Daten Visualisierung

# 
